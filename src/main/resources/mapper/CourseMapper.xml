<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.xmu.cms.dao.CourseDao">
    <select id="getAllCourseByTeacherId" resultType="com.xmu.cms.entity.Course">
        SELECT course_id          as courseId,
               teacher_id         as teacherId,
               name,
               introduction,
               pre_weight as presentationWeight,
               report_weight      as reportWeight,
               ques_weight    as questionWeight,
               team_start_date    as teamStartDate,
               team_end_date      as teamEndDate
        FROM course
        WHERE teacher_id = #{teacherId}
    </select>

    <select id="getAllCourseByStudentId" resultType="com.xmu.cms.entity.Course">
        SELECT course.course_id   as courseId,
               teacher_id         as teacherId,
               course.name,
               introduction,
               pre_weight as presentationWeight,
               report_weight      as reportWeight,
               ques_weight    as questionWeight,
               team_start_date    as teamStartDate,
               team_end_date      as teamEndDate
        FROM course,
             turning_class_student,
             turning_class
        WHERE student_id = #{studentId}
          AND turning_class.turning_class_id = turning_class_student.turning_class_id
          AND course.course_id = turning_class.course_id
    </select>

    <select id="getAllCoursesByTeacherAccount" resultType="com.xmu.cms.entity.Course">
        SELECT course_id          as courseId,
               course.teacher_id  as teacherId,
               course.name,
               introduction,
               pre_weight as presentationWeight,
               report_weight      as reportWeight,
               ques_weight    as questionWeight,
               team_start_date    as teamStartDate,
               team_end_date      as teamEndDate
        FROM course,
             teacher
        WHERE teacher.account = #{account}
          AND course.teacher_id = teacher.teacher_id
    </select>

    <delete id="deleteCourseById">
        DELETE *
        FROM course
        WHERE course_id = #{courseId}
    </delete>

    <insert id="newCourse" parameterType="com.xmu.cms.entity.Course">
        insert into course (course_Id ,teacher_id ,name ,introduction ,pre_weight ,report_weight ,ques_weight , team_start_date ,team_end_date)
        values (#(courseId), #(teacherId), #(name), #(introduction), #(presentationWeight), #(reportWeight), #(questionWeight), #(teamStartDate), #(teamEndDate))
    </insert>
</mapper>